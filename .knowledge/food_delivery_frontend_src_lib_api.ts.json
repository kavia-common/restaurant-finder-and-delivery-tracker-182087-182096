{"is_source_file": true, "format": "TypeScript", "description": "This file defines the API client for a food delivery frontend application, including types, mock data, and functions for interacting with backend endpoints such as fetching restaurants, orders, and authentication.", "external_files": ["./constants", "./auth"], "external_methods": ["buildAuthHeader"], "published": ["getRestaurants", "getRestaurantById", "createOrder", "getOrderById", "login", "register", "apiFetch", "FetchOptions", "Restaurant", "MenuItem", "OrderItem", "Order", "Credentials", "RegisterPayload"], "classes": [], "methods": [{"name": "export async function apiFetch<TResponse, TBody = unknown>( apiFetch", "description": "A wrapper around fetch that handles base URL, JSON parsing, error handling, and optional authentication headers.", "scope": "", "scopeKind": ""}, {"name": "export async function getRestaurants(): Promise<Restaurant[]> { getRestaurants", "description": "Fetches the list of restaurants, either from API or mock data if no base URL is configured.", "scope": "", "scopeKind": ""}, {"name": "export async function getRestaurantById( getRestaurantById", "description": "Fetches details of a specific restaurant, including its menu, from the API or mock data.", "scope": "", "scopeKind": ""}, {"name": "export async function createOrder(payload: { createOrder", "description": "Creates a new order with provided details, involves API call with authentication.", "scope": "", "scopeKind": ""}, {"name": "export async function getOrderById(id: string): Promise<Order> { getOrderById", "description": "Retrieves a specific order by ID, requiring authentication.", "scope": "", "scopeKind": ""}, {"name": "export async function login(credentials: Credentials): Promise<LoginResponse> { login", "description": "Performs user login, returns auth token and user info.", "scope": "", "scopeKind": ""}, {"name": "export async function register(payload: RegisterPayload): Promise<LoginResponse> { register", "description": "Registers a new user and returns auth token and user info.", "scope": "", "scopeKind": ""}, {"name": "function isKnownPath(path: string): boolean { isKnownPath", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "async function mockResponse<TResponse, TBody = unknown>( mockResponse", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["buildAuthHeader", "fetch", "mockResponse", "isKnownPath", "getRestaurants", "getRestaurantById", "createOrder", "getOrderById", "login", "register"], "search-terms": ["food_delivery_frontend", "api.ts", "mock datasets", "order creation", "restaurant list", "authentication endpoint", "mock API responses", "endpoint wrappers", "TypeScript types"], "state": 2, "file_id": 31, "knowledge_revision": 87, "git_revision": "", "revision_history": [{"84": ""}, {"87": ""}], "ctags": [{"_type": "tag", "name": "Credentials", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^export type Credentials = { email: string; password: string };$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "FetchOptions", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^export type FetchOptions<TBody = unknown> = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "LoginResponse", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^type LoginResponse = { token: string; user: { id: string; email: string; name?: string } };$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "MOCK_MENU", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^const MOCK_MENU: Record<string, MenuItem[]> = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "MOCK_RESTAURANTS", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^const MOCK_RESTAURANTS: Restaurant[] = [$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "MenuItem", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^export type MenuItem = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "Order", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^export type Order = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "OrderItem", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^export type OrderItem = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "RegisterPayload", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^export type RegisterPayload = { name: string; email: string; password: string };$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "Restaurant", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^export type Restaurant = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "apiFetch", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^export async function apiFetch<TResponse, TBody = unknown>($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^  const base = ENV.API_BASE_URL;$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}, {"_type": "tag", "name": "body", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^    const body = (options.body ?? {}) as { email?: string };$/", "language": "TypeScript", "kind": "constant", "scope": "mockResponse", "scopeKind": "function"}, {"_type": "tag", "name": "body", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^    const body = (options.body ?? {}) as { email?: string; name?: string };$/", "language": "TypeScript", "kind": "constant", "scope": "mockResponse", "scopeKind": "function"}, {"_type": "tag", "name": "body", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^    const body = (options.body ?? {}) as { restaurantId?: string; items?: OrderItem[] };$/", "language": "TypeScript", "kind": "constant", "scope": "mockResponse", "scopeKind": "function"}, {"_type": "tag", "name": "contentType", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^  const contentType = res.headers.get('content-type') || '';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "createOrder", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^export async function createOrder(payload: {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "createdAt", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^      createdAt: new Date().toISOString(),$/", "language": "TypeScript", "kind": "constant", "scope": "mockResponse", "scopeKind": "function"}, {"_type": "tag", "name": "getOrderById", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^export async function getOrderById(id: string): Promise<Order> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getRestaurantById", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^export async function getRestaurantById($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getRestaurants", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^export async function getRestaurants(): Promise<Restaurant[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^  const headers: Record<string, string> = {$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^    const id = path.split('\\/')[2];$/", "language": "TypeScript", "kind": "constant", "scope": "mockResponse", "scopeKind": "function"}, {"_type": "tag", "name": "isKnownPath", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^function isKnownPath(path: string): boolean {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^      items: (body?.items || []).map((it: OrderItem) => ({$/", "language": "TypeScript", "kind": "constant", "scope": "mockResponse", "scopeKind": "function"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^      items: [$/", "language": "TypeScript", "kind": "constant", "scope": "mockResponse", "scopeKind": "function"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^export async function login(credentials: Credentials): Promise<LoginResponse> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "menu", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^    const menu = (MOCK_MENU[id] || []).map((m) => ({ ...m }));$/", "language": "TypeScript", "kind": "constant", "scope": "mockResponse", "scopeKind": "function"}, {"_type": "tag", "name": "mockOrder", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^    const mockOrder: Order = {$/", "language": "TypeScript", "kind": "constant", "scope": "mockResponse", "scopeKind": "function"}, {"_type": "tag", "name": "mockResponse", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^async function mockResponse<TResponse, TBody = unknown>($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "now", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^    const now = new Date().toISOString();$/", "language": "TypeScript", "kind": "constant", "scope": "mockResponse", "scopeKind": "function"}, {"_type": "tag", "name": "orderId", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^    const orderId = `ord_${Math.random().toString(36).slice(2, 8)}`;$/", "language": "TypeScript", "kind": "constant", "scope": "mockResponse", "scopeKind": "function"}, {"_type": "tag", "name": "quantity", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^        { itemId: MOCK_MENU['r_1'][0].id, quantity: 1, price: MOCK_MENU['r_1'][0].price },$/", "language": "TypeScript", "kind": "constant", "scope": "mockResponse", "scopeKind": "function"}, {"_type": "tag", "name": "register", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^export async function register(payload: RegisterPayload): Promise<LoginResponse> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^  const res = await fetch(url, {$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}, {"_type": "tag", "name": "restaurant", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^    const restaurant = MOCK_RESTAURANTS.find((r) => r.id === id);$/", "language": "TypeScript", "kind": "constant", "scope": "mockResponse", "scopeKind": "function"}, {"_type": "tag", "name": "restaurantId", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^      restaurantId: MOCK_RESTAURANTS[0].id,$/", "language": "TypeScript", "kind": "constant", "scope": "mockResponse", "scopeKind": "function"}, {"_type": "tag", "name": "restaurantId", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^      restaurantId: body?.restaurantId || MOCK_RESTAURANTS[0].id,$/", "language": "TypeScript", "kind": "constant", "scope": "mockResponse", "scopeKind": "function"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^      status: 'CONFIRMED',$/", "language": "TypeScript", "kind": "constant", "scope": "mockResponse", "scopeKind": "function"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^    const text = await res.text().catch(() => '');$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "total", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^    const total = Array.isArray(body?.items)$/", "language": "TypeScript", "kind": "constant", "scope": "mockResponse", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/restaurant-finder-and-delivery-tracker-182087-182096/food_delivery_frontend/src/lib/api.ts", "pattern": "/^  const url = base ? `${base}${path}` : path;$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}], "hash": "191c6520b14d49917e495149e9f01dc3", "format-version": 4, "code-base-name": "food_delivery_frontend", "filename": "food_delivery_frontend/src/lib/api.ts"}